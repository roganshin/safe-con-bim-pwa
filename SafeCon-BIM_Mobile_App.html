<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Safe Con-BIM</title>
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#0d1117">
    
    <!-- iOS PWA ì§€ì›ì„ ìœ„í•œ ë©”íƒ€ íƒœê·¸ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Safe Con-BIM">
    
    <!-- iOS ì•„ì´ì½˜ ì„¤ì • (ì‹¤ì œ PNG) -->
    <link rel="apple-touch-icon" href="./icon-180x180.png">
    <link rel="apple-touch-icon" sizes="180x180" href="./icon-180x180.png">
    
    <!-- iOS ìŠ¤í”Œë˜ì‹œ ìŠ¤í¬ë¦° -->
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-startup-image" href="./icon-180x180.png">
    
    <!-- Microsoft Tiles -->
    <meta name="msapplication-TileColor" content="#0d1117">
    <meta name="msapplication-TileImage" content="./logo.png">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- ì†Œì…œ ë¡œê·¸ì¸ SDK (í•„ìš” ì‹œ í™œì„±í™”) -->
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script src="https://developers.kakao.com/sdk/js/kakao.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #0a0a0a;
            min-height: 100vh;
            color: #e0e0e0;
        }

        .container {
            max-width: 414px;
            margin: 0 auto;
            background: #0d1117;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 30px rgba(0,0,0,0.8);
            border-left: 1px solid #21262d;
            border-right: 1px solid #21262d;
        }

        /* ë¡œê·¸ì¸ í™”ë©´ */
        .login-screen {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1a1a 100%);
            padding: 28px 20px 20px;
        }

        .login-content {
            width: 100%;
            max-width: 360px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 16px;
        }

        .login-bottom {
            width: 100%;
            max-width: 360px;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 10px 0 6px;
        }

        .login-logo {
            width: 120px;
            height: 120px;
            background: url('./logo.png') center/contain no-repeat;
            margin-bottom: 30px;
            border-radius: 20px;
            border: 2px solid #21262d;
        }

        .login-title {
            font-size: 2em;
            font-weight: 700;
            color: #f0f6fc;
            margin-bottom: 10px;
            text-align: center;
        }

        .login-subtitle {
            font-size: 1em;
            color: #8b949e;
            margin-bottom: 40px;
            text-align: center;
        }

        .role-buttons {
            width: 100%;
            max-width: 360px;
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-top: 8px;
        }

        /* ì†Œì…œ ë¡œê·¸ì¸ - í•˜ë‹¨ ì›í˜• ì•„ì´ì½˜, ê°€ë¡œ ë°°ì¹˜ */
        .social-login-row {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 14px;
        }
        .social-icon-btn {
            width: 56px;
            height: 56px;
            border-radius: 50%;
            border: 2px solid #21262d;
            background: #161b22;
            color: #f0f6fc;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.3em;
            transition: transform 0.15s ease, box-shadow 0.2s ease, border-color 0.2s ease;
        }
        .social-icon-btn:hover { transform: translateY(-1px); border-color: #30363d; box-shadow: 0 6px 12px rgba(0,0,0,0.25); }
        .social-icon-btn.apple { background: #000; color: #fff; border-color: #000; }
        .social-icon-btn.google { background: #fff; color: #000; border-color: #e0e0e0; }
        .social-icon-btn.kakao { background: #FEE500; color: #111; border-color: #FEE500; }
        .social-icon-btn.naver { background: #03C75A; color: #fff; border-color: #03C75A; }

        .role-btn {
            padding: 22px 24px;
            border: 2px solid #21262d;
            border-radius: 8px; /* ë„¤ëª¨í˜•ì‹ */
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            color: #f0f6fc;
            font-size: 1.15em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.2s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 12px;
        }

        .role-btn:hover {
            border-color: #58a6ff;
            background: linear-gradient(135deg, #1f2937 0%, #161b22 100%);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.15);
        }

        .role-btn.manager {
            border-color: #f85149;
        }

        .role-btn.manager:hover {
            border-color: #f85149;
            box-shadow: 0 4px 12px rgba(248, 81, 73, 0.15);
        }

        /* í—¤ë” */
        .header {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            color: #f0f6fc;
            padding: 20px 15px 15px;
            text-align: center;
            position: sticky;
            top: 0;
            z-index: 100;
            border-bottom: 1px solid #21262d;
        }

        .logo {
            font-size: 1.5em;
            font-weight: 700;
            margin-bottom: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: url('./logo.png') center/contain no-repeat;
            filter: brightness(1.2);
        }

        .tagline {
            font-size: 0.85em;
            opacity: 0.8;
            color: #8b949e;
        }

        .header-controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .voice-btn, .qr-btn {
            background: linear-gradient(135deg, #238636 0%, #1a7f37 100%);
            border: 1px solid #2ea043;
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 0.8em;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .qr-btn {
            background: linear-gradient(135deg, #1f6feb 0%, #0969da 100%);
            border-color: #1f6feb;
        }

        .voice-btn:active, .qr-btn:active {
            transform: scale(0.95);
        }

        /* ìƒíƒœ í‘œì‹œ */
        .status-bar {
            display: flex;
            justify-content: space-between;
            background: #161b22;
            padding: 10px 15px;
            border-bottom: 1px solid #21262d;
        }

        .status-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85em;
            color: #8b949e;
        }

        .status-green { color: #2ea043; }
        .status-orange { color: #fb8500; }
        .status-red { color: #f85149; }
        .status-blue { color: #58a6ff; }

        /* ë©”ì¸ ì½˜í…ì¸  */
        .main-content {
            padding: 15px;
            padding-bottom: 80px;
        }

        /* ëŒ€ì‹œë³´ë“œ ì¹´ë“œ */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 20px;
        }

        .card {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 12px;
            padding: 15px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            text-align: center;
            transition: all 0.2s ease;
            color: #f0f6fc;
        }

        .card:hover {
            border-color: #30363d;
            box-shadow: 0 6px 12px rgba(0,0,0,0.4);
        }

        .card:active {
            transform: scale(0.98);
        }

        .card-icon {
            font-size: 2em;
            margin-bottom: 8px;
            filter: drop-shadow(0 0 8px rgba(88, 166, 255, 0.3));
        }

        .card-title {
            font-size: 0.9em;
            font-weight: 600;
            margin-bottom: 5px;
            color: #8b949e;
        }

        .card-value {
            font-size: 1.5em;
            font-weight: 700;
        }

        .safety-score { color: #2ea043; }
        .risk-count { color: #f85149; }
        .worker-count { color: #58a6ff; }
        .completion { color: #fb8500; }

        /* ì•Œë¦¼ ì„¹ì…˜ */
        .section {
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 12px;
            color: #f0f6fc;
        }

        .alert-list {
            space-y: 10px;
        }

        .alert-item {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 12px;
            margin-bottom: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            border-left: 4px solid;
            color: #f0f6fc;
        }

        .alert-critical { border-left-color: #f85149; }
        .alert-warning { border-left-color: #fb8500; }
        .alert-info { border-left-color: #58a6ff; }

        .alert-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 5px;
        }

        .alert-title {
            font-weight: 600;
            font-size: 0.9em;
        }

        .alert-time {
            font-size: 0.8em;
            color: #8b949e;
        }

        .alert-description {
            font-size: 0.85em;
            color: #c9d1d9;
        }

        /* ì‘ì—…ì ëª©ë¡ */
        .worker-list {
            display: grid;
            gap: 10px;
        }

        .worker-item {
            display: flex;
            align-items: center;
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 2px 6px rgba(0,0,0,0.3);
            color: #f0f6fc;
        }

        .worker-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: linear-gradient(135deg, #58a6ff, #1f6feb);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            margin-right: 12px;
            border: 2px solid #21262d;
        }

        .worker-info {
            flex: 1;
        }

        .worker-name {
            font-weight: 600;
            font-size: 0.9em;
            color: #f0f6fc;
        }

        .worker-role {
            font-size: 0.8em;
            color: #8b949e;
        }

        .worker-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            margin-left: auto;
        }

        /* ë„¤ë¹„ê²Œì´ì…˜ */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 100%;
            max-width: 414px;
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border-top: 1px solid #21262d;
            display: flex;
            justify-content: space-around;
            padding: 8px 0;
            z-index: 100;
        }

        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            text-decoration: none;
            color: #8b949e;
            transition: all 0.2s ease;
            cursor: pointer;
            border-radius: 8px;
        }

        .nav-item.active,
        .nav-item:hover {
            color: #58a6ff;
            background: rgba(88, 166, 255, 0.1);
        }

        .nav-item i {
            font-size: 1.2em;
            margin-bottom: 4px;
        }

        .nav-item span {
            font-size: 0.7em;
        }

        /* ëª¨ë‹¬ ë° íƒ­ */
        .tab-container {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 12px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.3);
            overflow: hidden;
        }

        .tab-header {
            display: flex;
            background: #21262d;
        }

        .tab-button {
            flex: 1;
            padding: 12px;
            text-align: center;
            background: none;
            border: none;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
            color: #8b949e;
        }

        .tab-button.active {
            background: #58a6ff;
            color: white;
        }

        .tab-content {
            padding: 15px;
            display: none;
            color: #f0f6fc;
        }

        .tab-content.active {
            display: block;
        }

        /* BIM ì‹œë®¬ë ˆì´ì…˜ */
        .bim-container {
            background: #0d1117;
            border: 1px solid #21262d;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            text-align: center;
        }

        .bim-viewer {
            width: 100%;
            height: 200px;
            background: linear-gradient(45deg, #161b22 25%, transparent 25%), 
                        linear-gradient(-45deg, #161b22 25%, transparent 25%),
                        linear-gradient(45deg, transparent 75%, #161b22 75%), 
                        linear-gradient(-45deg, transparent 75%, #161b22 75%);
            background-size: 20px 20px;
            background-position: 0 0, 0 10px, 10px -10px, -10px 0px;
            border-radius: 8px;
            border: 2px solid #21262d;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .bim-controls {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        /* QR ìŠ¤ìºë„ˆ */
        .qr-scanner {
            background: #0d1117;
            border: 2px solid #21262d;
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            margin-bottom: 20px;
        }

        .qr-viewfinder {
            width: 200px;
            height: 200px;
            border: 2px solid #58a6ff;
            border-radius: 12px;
            margin: 0 auto 15px;
            position: relative;
            background: linear-gradient(45deg, rgba(88, 166, 255, 0.1) 25%, transparent 25%);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .qr-viewfinder::before {
            content: '';
            position: absolute;
            top: 10px;
            left: 10px;
            right: 10px;
            bottom: 10px;
            border: 2px dashed #58a6ff;
            border-radius: 8px;
        }

        /* ë°˜ì‘í˜• */
        @media (max-width: 380px) {
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
        }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(88, 166, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(88, 166, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(88, 166, 255, 0); }
        }

        /* ì¶”ê°€ ìŠ¤íƒ€ì¼ */
        .progress-bar {
            width: 100%;
            height: 8px;
            background: #21262d;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 8px;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #2ea043, #238636);
            transition: width 0.3s ease;
        }

        .quick-actions {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .action-btn {
            background: linear-gradient(135deg, #58a6ff, #1f6feb);
            color: white;
            border: 1px solid #1f6feb;
            border-radius: 8px;
            padding: 12px;
            font-size: 0.9em;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 600;
        }

        .action-btn:hover {
            background: linear-gradient(135deg, #6cb6ff, #4184f4);
            box-shadow: 0 4px 12px rgba(88, 166, 255, 0.3);
        }

        .action-btn:active {
            transform: scale(0.98);
        }

        .action-btn.secondary {
            background: linear-gradient(135deg, #6e7681, #484f58);
            border-color: #6e7681;
        }

        .action-btn.secondary:hover {
            background: linear-gradient(135deg, #8b949e, #6e7681);
        }

        .action-btn.danger {
            background: linear-gradient(135deg, #f85149, #da3633);
            border-color: #f85149;
        }

        /* ì›Œì»¤ ì „ìš© ìŠ¤íƒ€ì¼ */
        .worker-mode {
            padding: 40px 20px;
            text-align: center;
        }

        .account-badge {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8em;
            font-weight: 600;
            margin-bottom: 15px;
            border: 1px solid;
        }

        .account-badge.basic {
            background: linear-gradient(135deg, #6e7681, #484f58);
            border-color: #6e7681;
            color: white;
        }

        .account-badge.pro {
            background: linear-gradient(135deg, #fb8500, #f77f00);
            border-color: #fb8500;
            color: white;
        }

        .worker-qr-btn {
            background: linear-gradient(135deg, #2ea043, #1a7f37);
            border: 2px solid #2ea043;
            color: white;
            padding: 20px;
            border-radius: 16px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin: 20px auto;
        }

        .worker-qr-btn:hover {
            background: linear-gradient(135deg, #46954a, #238636);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(46, 160, 67, 0.3);
        }

        .plan-comparison {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            text-align: left;
        }

        .plan-title {
            font-size: 1.1em;
            font-weight: 600;
            margin-bottom: 15px;
            color: #f0f6fc;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .close-btn {
            background: none;
            border: none;
            color: #8b949e;
            cursor: pointer;
            padding: 4px;
            border-radius: 4px;
            transition: all 0.2s ease;
        }

        .close-btn:hover {
            color: #f0f6fc;
            background: #21262d;
        }

        .upgrade-notification {
            background: linear-gradient(135deg, #2ea043, #238636);
            border: 1px solid #2ea043;
            border-radius: 12px;
            padding: 15px;
            margin: 15px 0;
            color: white;
            text-align: center;
            animation: fadeIn 0.5s ease-in;
        }

        /* ë””ì§€í„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ */
        .checklist-container {
            padding: 0;
        }

        .checklist-header {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
        }

        .checklist-stats {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 10px;
            margin-top: 15px;
        }

        .stat-item {
            text-align: center;
            padding: 8px;
            border-radius: 8px;
            background: #21262d;
        }

        .stat-number {
            font-size: 1.2em;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.8em;
            color: #8b949e;
            margin-top: 2px;
        }

        .checklist-section {
            background: linear-gradient(135deg, #161b22 0%, #0d1117 100%);
            border: 1px solid #21262d;
            border-radius: 12px;
            margin-bottom: 15px;
            overflow: hidden;
        }

        .section-header {
            background: #21262d;
            padding: 12px 15px;
            border-bottom: 1px solid #30363d;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .section-header:hover {
            background: #30363d;
        }

        .section-title {
            font-weight: 600;
            color: #f0f6fc;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .section-progress {
            font-size: 0.8em;
            color: #8b949e;
        }

        .section-content {
            padding: 0;
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.3s ease;
        }

        .section-content.expanded {
            max-height: 1000px;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            border-bottom: 1px solid #21262d;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .checklist-item:last-child {
            border-bottom: none;
        }

        .checklist-item:hover {
            background: rgba(88, 166, 255, 0.05);
        }

        .checklist-item.completed {
            background: rgba(46, 160, 67, 0.1);
        }

        .checklist-item.critical {
            background: rgba(248, 81, 73, 0.1);
        }

        .checkbox {
            width: 20px;
            height: 20px;
            border: 2px solid #30363d;
            border-radius: 4px;
            margin-right: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            cursor: pointer;
        }

        .checkbox.checked {
            background: #2ea043;
            border-color: #2ea043;
            color: white;
        }

        .checkbox.critical {
            border-color: #f85149;
        }

        .item-content {
            flex: 1;
        }

        .item-title {
            font-weight: 500;
            color: #f0f6fc;
            margin-bottom: 2px;
        }

        .item-description {
            font-size: 0.8em;
            color: #8b949e;
        }

        .item-priority {
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 0.7em;
            font-weight: 600;
            margin-left: 8px;
        }

        .priority-high {
            background: #f85149;
            color: white;
        }

        .priority-medium {
            background: #fb8500;
            color: white;
        }

        .priority-low {
            background: #2ea043;
            color: white;
        }

        .submit-checklist {
            background: linear-gradient(135deg, #2ea043, #238636);
            border: 2px solid #2ea043;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin: 20px 0;
        }

        .submit-checklist:hover {
            background: linear-gradient(135deg, #46954a, #2ea043);
            transform: translateY(-2px);
            box-shadow: 0 6px 12px rgba(46, 160, 67, 0.3);
        }

        .submit-checklist:disabled {
            background: #6e7681;
            border-color: #6e7681;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .plan-features {
            list-style: none;
            padding: 0;
        }

        .plan-features li {
            padding: 8px 0;
            border-bottom: 1px solid #21262d;
            display: flex;
            justify-content: space-between;
            align-items: center;
            color: #c9d1d9;
            font-size: 0.9em;
        }

        .plan-features li:last-child {
            border-bottom: none;
        }

        .feature-status {
            font-size: 0.8em;
            padding: 2px 8px;
            border-radius: 12px;
        }

        .feature-included {
            background: #2ea043;
            color: white;
        }

        .feature-limited {
            background: #fb8500;
            color: white;
        }

        .feature-locked {
            background: #6e7681;
            color: white;
        }

        .upgrade-btn {
            background: linear-gradient(135deg, #fb8500, #f77f00);
            border: 2px solid #fb8500;
            color: white;
            padding: 15px 20px;
            border-radius: 12px;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: block;
            width: 100%;
            margin: 15px auto;
        }

        .upgrade-btn:hover {
            background: linear-gradient(135deg, #ffb700, #fb8500);
            transform: translateY(-2px);
            box-shadow: 0 8px 16px rgba(251, 133, 0, 0.3);
        }

        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 8px;
        }

        .hidden {
            display: none !important;
        }

        /* ì„¤ì¹˜ ì•ˆë‚´ ëª¨ë‹¬ */
        .install-modal {
            position: fixed;
            left: 0; right: 0; bottom: 0;
            background: rgba(13,17,23,0.98);
            border-top: 1px solid #21262d;
            padding: 16px;
            z-index: 9999;
        }
        .install-modal .title { color: #f0f6fc; font-weight: 700; margin-bottom: 8px; }
        .install-modal .desc { color: #8b949e; font-size: 0.9em; line-height: 1.4; }
        .install-modal .row { display:flex; justify-content: space-between; align-items:center; margin-top: 10px; }
        .install-modal .btn { background: #238636; color: white; border: 0; border-radius: 8px; padding: 8px 12px; font-weight: 600; }
        .install-modal .close { background: #6e7681; }
    </style>
</head>
<body>
    <div class="container">
        <!-- ë¡œê·¸ì¸ í™”ë©´ -->
        <div id="login-screen" class="login-screen">
            <div class="login-logo"></div>
            <div class="login-title">Safe Con-BIM</div>
            <div class="login-subtitle">Building Safety Before Building</div>
            
            <div class="login-content">
                <div class="login-divider">ì—­í•  ì„ íƒ</div>
            </div>
            <div class="role-buttons">
                <button class="role-btn worker" onclick="loginAs('worker')">
                    <i class="fas fa-hard-hat"></i>
                    <span>ì‘ì—…ì ëª¨ë“œ</span>
                </button>
                <button class="role-btn manager" onclick="loginAs('manager')">
                    <i class="fas fa-user-tie"></i>
                    <span>ê´€ë¦¬ì ëª¨ë“œ</span>
                </button>
            </div>
            <div class="login-bottom">
                <div class="social-login-row">
                    <button class="social-icon-btn apple" onclick="handleSocialLogin('apple')" title="Apple">
                        <i class="fab fa-apple"></i>
                    </button>
                    <button class="social-icon-btn google" onclick="handleSocialLogin('google')" title="Google">
                        <i class="fab fa-google"></i>
                    </button>
                    <button class="social-icon-btn kakao" onclick="handleSocialLogin('kakao')" title="Kakao">
                        <i class="fas fa-comment"></i>
                    </button>
                    <button class="social-icon-btn naver" onclick="handleSocialLogin('naver')" title="Naver">
                        <i class="fas fa-leaf"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- iOS ì„¤ì¹˜ ì•ˆë‚´ ëª¨ë‹¬ -->
        <div id="install-modal" class="install-modal hidden">
            <div class="title">í™ˆ í™”ë©´ì— ì¶”ê°€</div>
            <div class="desc">
                iPhoneì—ì„œ ì•±ìœ¼ë¡œ ì‚¬ìš©í•˜ë ¤ë©´ Safariì—ì„œ ì´ í˜ì´ì§€ë¥¼ ì—° ë’¤<br>
                í•˜ë‹¨ì˜ ê³µìœ  ë²„íŠ¼(â–¡â†—) â†’ "í™ˆ í™”ë©´ì— ì¶”ê°€"ë¥¼ ì„ íƒí•˜ì„¸ìš”.
            </div>
            <div class="row">
                <small style="color:#8b949e;">Safari ì „ìš© Â· ì²« ì‹¤í–‰ì€ ë„¤íŠ¸ì›Œí¬ í•„ìš”</small>
                <div>
                    <button class="btn close" onclick="hideInstallModal()">ë‚˜ì¤‘ì—</button>
                    <button class="btn" onclick="ackInstallGuide()">í™•ì¸</button>
                </div>
            </div>
        </div>

        <!-- ê´€ë¦¬ì ì•± -->
        <div id="manager-app" class="hidden">
            <!-- í—¤ë” -->
            <div class="header">
                <div class="account-badge basic" id="manager-account-type">
                    <i class="fas fa-user"></i> Basic ê³„ì •
                </div>
                <div class="logo">
                    <div class="logo-icon"></div>
                    <span>Safe Con-BIM</span>
                </div>
                <div class="tagline">Building Safety Before Building</div>
                <div class="header-controls">
                    <button class="voice-btn" onclick="startVoiceRecognition()">
                        <i class="fas fa-microphone"></i> ìŒì„±ì¸ì‹
                    </button>
                    <button class="qr-btn" onclick="startQRScanner()">
                        <i class="fas fa-qrcode"></i> QRìŠ¤ìº”
                    </button>
                </div>
            </div>

            <!-- ìƒíƒœ í‘œì‹œë°” -->
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-indicator status-green" style="background: #2ea043;"></div>
                    <i class="fas fa-wifi status-green"></i>
                    <span>ì—°ê²°ë¨</span>
                </div>
                <div class="status-item">
                    <div class="status-indicator status-green" style="background: #2ea043;"></div>
                    <i class="fas fa-shield-alt status-green"></i>
                    <span>ì•ˆì „</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-clock status-blue"></i>
                    <span id="current-time">14:32</span>
                </div>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <div class="main-content">
                <!-- ëŒ€ì‹œë³´ë“œ -->
                <div id="dashboard" class="tab-content active">
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-icon">ğŸ›¡ï¸</div>
                        <div class="card-title">ì•ˆì „ ì ìˆ˜</div>
                        <div class="card-value safety-score">87</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 87%"></div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-icon">âš ï¸</div>
                        <div class="card-title">ìœ„í—˜ ìš”ì†Œ</div>
                        <div class="card-value risk-count">3</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">ğŸ‘·</div>
                        <div class="card-title">í˜„ì¬ ì‘ì—…ì</div>
                        <div class="card-value worker-count">12</div>
                    </div>
                    <div class="card">
                        <div class="card-icon">ğŸ“Š</div>
                        <div class="card-title">ì§„í–‰ë¥ </div>
                        <div class="card-value completion">65%</div>
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 65%"></div>
                        </div>
                    </div>
                </div>

                    <!-- ë¹ ë¥¸ ì•¡ì…˜ -->
                    <div class="quick-actions">
                        <button class="action-btn" onclick="checkFeatureAccess('bim')">
                            <i class="fas fa-cube"></i> BIM ì‹œë®¬ë ˆì´ì…˜
                            <span style="font-size: 0.7em; opacity: 0.8;" id="bim-badge">ğŸ”’ Pro</span>
                        </button>
                        <button class="action-btn secondary" onclick="checkFeatureAccess('monitoring')">
                            <i class="fas fa-video"></i> ê³ ê¸‰ ëª¨ë‹ˆí„°ë§
                            <span style="font-size: 0.7em; opacity: 0.8;" id="monitoring-badge">ğŸ”’ Pro</span>
                        </button>
                    </div>
                </div>

                <!-- ê³„ì • ë¹„êµ (ê´€ë¦¬ììš©) - ê¸°ë³¸ ìˆ¨ê¹€ -->
                <div class="plan-comparison hidden" id="plan-comparison">
                    <div class="plan-title">
                        ğŸ’¡ ê³„ì • ê¸°ëŠ¥ ë¹„êµ
                        <button class="close-btn" onclick="hidePlanComparison()">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <ul class="plan-features">
                        <li>
                            <span>ê¸°ë³¸ ì•ˆì „ì ê²€</span>
                            <span class="feature-status feature-included">í¬í•¨</span>
                        </li>
                        <li>
                            <span>QR/NFC ìœ„ì¹˜ì¶”ì </span>
                            <span class="feature-status feature-included">í¬í•¨</span>
                        </li>
                        <li>
                            <span>ê¸°ë³¸ ëª¨ë‹ˆí„°ë§</span>
                            <span class="feature-status feature-limited">ì œí•œ</span>
                        </li>
                        <li>
                            <span>BIM 4D ì‹œë®¬ë ˆì´ì…˜</span>
                            <span class="feature-status feature-locked" id="bim-feature">Pro ì „ìš©</span>
                        </li>
                        <li>
                            <span>AI ìœ„í—˜ ì˜ˆì¸¡</span>
                            <span class="feature-status feature-locked" id="ai-feature">Pro ì „ìš©</span>
                        </li>
                        <li>
                            <span>ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</span>
                            <span class="feature-status feature-locked" id="monitoring-feature">Pro ì „ìš©</span>
                        </li>
                        <li>
                            <span>í´ë¼ìš°ë“œ ë°±ì—…</span>
                            <span class="feature-status feature-locked" id="cloud-feature">Pro ì „ìš©</span>
                        </li>
                        <li>
                            <span>24/7 ê¸°ìˆ ì§€ì›</span>
                            <span class="feature-status feature-locked" id="support-feature">Pro ì „ìš©</span>
                        </li>
                    </ul>
                    
                    <button class="upgrade-btn" id="manager-upgrade-btn" onclick="showManagerUpgradeModal()">
                        <i class="fas fa-crown" style="margin-right: 10px;"></i>
                        Safe Proë¡œ ì—…ê·¸ë ˆì´ë“œ (ì›” 37ë§Œì›)
                    </button>
                </div>

                <!-- ë””ì§€í„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
                <div id="checklist" class="tab-content">
                    <div class="section">
                        <div class="section-title">ğŸ“‹ ë””ì§€í„¸ ì•ˆì „ ì²´í¬ë¦¬ìŠ¤íŠ¸</div>
                        <div class="checklist-container">
                            <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ í—¤ë” -->
                            <div class="checklist-header">
                                <div style="color: #f0f6fc; font-weight: 600; margin-bottom: 5px;">
                                    Aë™ 3ì¸µ ì¼ì¼ ì•ˆì „ì ê²€
                                </div>
                                <div style="color: #8b949e; font-size: 0.9em;">
                                    2025ë…„ 1ì›” 20ì¼ (ì›”) 14:32
                                </div>
                                <div class="checklist-stats">
                                    <div class="stat-item">
                                        <div class="stat-number" style="color: #2ea043;" id="completed-count">0</div>
                                        <div class="stat-label">ì™„ë£Œ</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-number" style="color: #fb8500;" id="pending-count">15</div>
                                        <div class="stat-label">ëŒ€ê¸°</div>
                                    </div>
                                    <div class="stat-item">
                                        <div class="stat-number" style="color: #58a6ff;" id="progress-percent">0%</div>
                                        <div class="stat-label">ì§„í–‰ë¥ </div>
                                    </div>
                                </div>
                            </div>

                            <!-- PPE ì ê²€ -->
                            <div class="checklist-section">
                                <div class="section-header" onclick="toggleSection('ppe-section')">
                                    <div class="section-title">
                                        <i class="fas fa-hard-hat"></i>
                                        ê°œì¸ë³´í˜¸êµ¬(PPE) ì ê²€
                                    </div>
                                    <div class="section-progress" id="ppe-progress">0/4</div>
                                </div>
                                <div class="section-content" id="ppe-section">
                                    <div class="checklist-item critical" onclick="toggleCheckItem(this, 'ppe1')">
                                        <div class="checkbox critical" id="ppe1">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì•ˆì „ëª¨ ì°©ìš© í™•ì¸</div>
                                            <div class="item-description">ì‘ì—…ì ì „ì› ì•ˆì „ëª¨ ì°©ìš© ìƒíƒœ ì ê²€</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'ppe2')">
                                        <div class="checkbox" id="ppe2">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì•ˆì „í™” ì°©ìš© í™•ì¸</div>
                                            <div class="item-description">ë¯¸ë„ëŸ¼ ë°©ì§€ ë° ë³´í˜¸ ê¸°ëŠ¥ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'ppe3')">
                                        <div class="checkbox" id="ppe3">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì•ˆì „ì¡°ë¼ ì°©ìš© í™•ì¸</div>
                                            <div class="item-description">ì‹œì¸ì„± í™•ë³´ë¥¼ ìœ„í•œ ì•ˆì „ì¡°ë¼ ì°©ìš©</div>
                                        </div>
                                        <div class="item-priority priority-medium">ê¶Œì¥</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'ppe4')">
                                        <div class="checkbox" id="ppe4">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì•ˆì „ë²¨íŠ¸ ì ê²€</div>
                                            <div class="item-description">ê³ ì†Œì‘ì—… ì‹œ ì•ˆì „ë²¨íŠ¸ ìƒíƒœ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì¥ë¹„ ì ê²€ -->
                            <div class="checklist-section">
                                <div class="section-header" onclick="toggleSection('equipment-section')">
                                    <div class="section-title">
                                        <i class="fas fa-tools"></i>
                                        ì¥ë¹„ ë° ë„êµ¬ ì ê²€
                                    </div>
                                    <div class="section-progress" id="equipment-progress">0/5</div>
                                </div>
                                <div class="section-content" id="equipment-section">
                                    <div class="checklist-item critical" onclick="toggleCheckItem(this, 'eq1')">
                                        <div class="checkbox critical" id="eq1">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">í¬ë ˆì¸ ì‘ë™ ì ê²€</div>
                                            <div class="item-description">ìœ ì••, ë¸Œë ˆì´í¬, ì•ˆì „ì¥ì¹˜ ì •ìƒ ì‘ë™ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'eq2')">
                                        <div class="checkbox" id="eq2">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì „ë™ê³µêµ¬ ì ê²€</div>
                                            <div class="item-description">ì ˆì—°ìƒíƒœ, ì½”ë“œ ì†ìƒ ì—¬ë¶€ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-medium">ê¶Œì¥</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'eq3')">
                                        <div class="checkbox" id="eq3">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì‚¬ë‹¤ë¦¬ ì•ˆì „ì ê²€</div>
                                            <div class="item-description">ë°œíŒ, ë‚œê°„ ê³ ì •ìƒíƒœ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'eq4')">
                                        <div class="checkbox" id="eq4">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì•ˆì „ë‚œê°„ ì„¤ì¹˜í™•ì¸</div>
                                            <div class="item-description">ì‘ì—…êµ¬ì—­ ì£¼ë³€ ì•ˆì „ë‚œê°„ ì„¤ì¹˜ ìƒíƒœ</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'eq5')">
                                        <div class="checkbox" id="eq5">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">í™”ì¬ ì•ˆì „ì¥ë¹„ ì ê²€</div>
                                            <div class="item-description">ì†Œí™”ê¸°, í™”ì¬ê°ì§€ê¸° ì •ìƒ ì‘ë™ í™•ì¸</div>
                                        </div>
                                        <div class="item-priority priority-medium">ê¶Œì¥</div>
                                    </div>
                                </div>
                            </div>

                            <!-- í™˜ê²½ ì ê²€ -->
                            <div class="checklist-section">
                                <div class="section-header" onclick="toggleSection('environment-section')">
                                    <div class="section-title">
                                        <i class="fas fa-cloud-sun"></i>
                                        ì‘ì—…í™˜ê²½ ì ê²€
                                    </div>
                                    <div class="section-progress" id="environment-progress">0/3</div>
                                </div>
                                <div class="section-content" id="environment-section">
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'env1')">
                                        <div class="checkbox" id="env1">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ë‚ ì”¨ ìƒíƒœ í™•ì¸</div>
                                            <div class="item-description">ë°”ëŒ, ê°•ìˆ˜ëŸ‰, ì‹œì • ìƒíƒœ ì ê²€</div>
                                        </div>
                                        <div class="item-priority priority-medium">ê¶Œì¥</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'env2')">
                                        <div class="checkbox" id="env2">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì‘ì—…êµ¬ì—­ ì •ë¦¬ì •ëˆ</div>
                                            <div class="item-description">ì¥ì• ë¬¼ ì œê±° ë° í†µë¡œ í™•ë³´</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'env3')">
                                        <div class="checkbox" id="env3">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì¡°ëª… ìƒíƒœ í™•ì¸</div>
                                            <div class="item-description">ì‘ì—…êµ¬ì—­ ì ì • ì¡°ë„ í™•ë³´</div>
                                        </div>
                                        <div class="item-priority priority-low">ì¼ë°˜</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì•ˆì „êµìœ¡ í™•ì¸ -->
                            <div class="checklist-section">
                                <div class="section-header" onclick="toggleSection('education-section')">
                                    <div class="section-title">
                                        <i class="fas fa-graduation-cap"></i>
                                        ì•ˆì „êµìœ¡ í™•ì¸
                                    </div>
                                    <div class="section-progress" id="education-progress">0/3</div>
                                </div>
                                <div class="section-content" id="education-section">
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'edu1')">
                                        <div class="checkbox" id="edu1">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì¼ì¼ ì•ˆì „êµìœ¡ ì‹¤ì‹œ</div>
                                            <div class="item-description">ì‘ì—… ì „ ì•ˆì „ìˆ˜ì¹™ êµìœ¡ ì™„ë£Œ</div>
                                        </div>
                                        <div class="item-priority priority-high">í•„ìˆ˜</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'edu2')">
                                        <div class="checkbox" id="edu2">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ì‹ ê·œ ì‘ì—…ì êµìœ¡</div>
                                            <div class="item-description">ì‹ ê·œ íˆ¬ì… ì¸ë ¥ ë³„ë„ êµìœ¡</div>
                                        </div>
                                        <div class="item-priority priority-medium">ê¶Œì¥</div>
                                    </div>
                                    <div class="checklist-item" onclick="toggleCheckItem(this, 'edu3')">
                                        <div class="checkbox" id="edu3">
                                            <i class="fas fa-check" style="display: none;"></i>
                                        </div>
                                        <div class="item-content">
                                            <div class="item-title">ë¹„ìƒìƒí™© ëŒ€ì‘êµìœ¡</div>
                                            <div class="item-description">í™”ì¬, ì‘ê¸‰ìƒí™© ëŒ€ì‘ì ˆì°¨ ìˆ™ì§€</div>
                                        </div>
                                        <div class="item-priority priority-low">ì¼ë°˜</div>
                                    </div>
                                </div>
                            </div>

                            <!-- ì œì¶œ ë²„íŠ¼ -->
                            <button class="submit-checklist" id="submit-btn" onclick="submitChecklist()" disabled>
                                <i class="fas fa-paper-plane" style="margin-right: 8px;"></i>
                                ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œ (í•„ìˆ˜ í•­ëª© ë¯¸ì™„ë£Œ)
                            </button>
                        </div>
                    </div>
                </div>

                <!-- BIM 4D ì‹œë®¬ë ˆì´ì…˜ -->
                <div id="bim" class="tab-content">
                    <div class="section">
                        <div class="section-title">ğŸ—ï¸ BIM 4D ì‹œë®¬ë ˆì´ì…˜</div>
                        <div class="bim-container">
                            <div class="bim-viewer">
                                <div style="color: #8b949e; text-align: center;">
                                    <i class="fas fa-cube" style="font-size: 3em; margin-bottom: 10px; opacity: 0.5;"></i>
                                    <div>3D ëª¨ë¸ ë¡œë”© ì¤‘...</div>
                                    <div style="font-size: 0.8em; margin-top: 5px;">Aë™ 3ì¸µ ì² ê·¼ ì‘ì—…</div>
                                </div>
                            </div>
                            <div class="bim-controls">
                                <button class="action-btn">
                                    <i class="fas fa-play"></i> ì‹œë®¬ë ˆì´ì…˜ ì‹œì‘
                                </button>
                                <button class="action-btn secondary">
                                    <i class="fas fa-exclamation-triangle"></i> ìœ„í—˜ìš”ì†Œ ë¶„ì„
                                </button>
                            </div>
                        </div>
                        <div class="alert-item alert-warning">
                            <div class="alert-title">AI ìœ„í—˜ ì˜ˆì¸¡ ê²°ê³¼</div>
                            <div class="alert-description">
                                âš ï¸ í¬ë ˆì¸ ì‘ì—… ë°˜ê²½ ë‚´ ì¶”ë½ ìœ„í—˜ êµ¬ì—­ 3ê³³ ê°ì§€<br>
                                ğŸ“ Aë™ 3ì¸µ ë™ìª½ ëª¨ì„œë¦¬ - ìœ„í—˜ë„: ë†’ìŒ<br>
                                ğŸ›¡ï¸ ê¶Œì¥: ì•ˆì „ë‚œê°„ ì¶”ê°€ ì„¤ì¹˜ í•„ìš”
                            </div>
                        </div>
                    </div>
                </div>

                <!-- QR/NFC ìœ„ì¹˜ì¶”ì  -->
                <div id="tracking" class="tab-content">
                    <div class="section">
                        <div class="section-title">ğŸ“ QR/NFC ìœ„ì¹˜ì¶”ì </div>
                        <div class="qr-scanner hidden" id="qr-scanner">
                            <div class="qr-viewfinder">
                                <div style="color: #58a6ff; text-align: center;">
                                    <i class="fas fa-camera" style="font-size: 2em; margin-bottom: 10px;"></i>
                                    <div>QR ì½”ë“œë¥¼ ìŠ¤ìº”í•˜ì„¸ìš”</div>
                                </div>
                            </div>
                            <button class="action-btn danger" onclick="stopQRScanner()">
                                <i class="fas fa-times"></i> ìŠ¤ìº” ì¤‘ì§€
                            </button>
                        </div>
                        
                        <div class="quick-actions" style="margin-bottom: 20px;">
                            <button class="action-btn" onclick="startQRScanner()">
                                <i class="fas fa-qrcode"></i> QR ìŠ¤ìº”
                            </button>
                            <button class="action-btn secondary" onclick="activateNFC()">
                                <i class="fas fa-wifi"></i> NFC í™œì„±í™”
                            </button>
                        </div>

                        <div class="worker-list">
                            <div class="worker-item">
                                <div class="worker-avatar">ê¹€</div>
                                <div class="worker-info">
                                    <div class="worker-name">ê¹€í˜„ìˆ˜ (í˜„ì¥ê°ë…)</div>
                                    <div class="worker-role">ğŸ“ Aë™ 3ì¸µ - 2ë¶„ ì „</div>
                                </div>
                                <div class="status-indicator" style="background: #2ea043;"></div>
                            </div>
                            <div class="worker-item">
                                <div class="worker-avatar">ì´</div>
                                <div class="worker-info">
                                    <div class="worker-name">ì´ì² í˜¸ (í¬ë ˆì¸ê¸°ì‚¬)</div>
                                    <div class="worker-role">ğŸ“ í¬ë ˆì¸ ì¡°ì¢…ì‹¤ - ì‹¤ì‹œê°„</div>
                                </div>
                                <div class="status-indicator" style="background: #2ea043;"></div>
                            </div>
                            <div class="worker-item">
                                <div class="worker-avatar">ë°•</div>
                                <div class="worker-info">
                                    <div class="worker-name">ë°•ë¯¼ìˆ˜ (ì² ê·¼ê³µ)</div>
                                    <div class="worker-role">ğŸ“ ìœ„ì¹˜ ë¯¸í™•ì¸ - 15ë¶„ ì „</div>
                                </div>
                                <div class="status-indicator" style="background: #fb8500;"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- ì•Œë¦¼ ì„¹ì…˜ -->
                <div id="alerts" class="tab-content">
                <div class="section">
                    <div class="section-title">ğŸš¨ ê¸´ê¸‰ ì•Œë¦¼</div>
                    <div class="alert-list">
                        <div class="alert-item alert-critical">
                            <div class="alert-header">
                                <div class="alert-title">PPE ë¯¸ì°©ìš© ê°ì§€</div>
                                <div class="alert-time">2ë¶„ ì „</div>
                            </div>
                            <div class="alert-description">
                                Aë™ 3ì¸µì—ì„œ ì•ˆì „ëª¨ ë¯¸ì°©ìš© ì‘ì—…ì ë°œê²¬ (ê¹€â—‹â—‹)
                            </div>
                        </div>
                        <div class="alert-item alert-warning">
                            <div class="alert-header">
                                <div class="alert-title">ìœ„í—˜ êµ¬ì—­ ì ‘ê·¼</div>
                                <div class="alert-time">15ë¶„ ì „</div>
                            </div>
                            <div class="alert-description">
                                í¬ë ˆì¸ ì‘ì—… ë°˜ê²½ ë‚´ ì‘ì—…ì ì ‘ê·¼ ê°ì§€
                            </div>
                        </div>
                        <div class="alert-item alert-info">
                            <div class="alert-header">
                                <div class="alert-title">ì¼ì¼ ì•ˆì „ êµìœ¡</div>
                                <div class="alert-time">1ì‹œê°„ ì „</div>
                            </div>
                            <div class="alert-description">
                                ì˜¤ëŠ˜ì˜ ì•ˆì „ êµìœ¡ ì™„ë£Œìœ¨: 85% (17/20ëª…)
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- ì‘ì—…ì í˜„í™© -->
                <div id="workers" class="tab-content">
                <div class="section">
                    <div class="section-title">ğŸ‘· í˜„ì¬ ì‘ì—…ì í˜„í™©</div>
                    <div class="worker-list">
                        <div class="worker-item">
                            <div class="worker-avatar">ê¹€</div>
                            <div class="worker-info">
                                <div class="worker-name">ê¹€í˜„ìˆ˜</div>
                                <div class="worker-role">í˜„ì¥ ê°ë…</div>
                            </div>
                            <div class="worker-status status-green" style="background: #27ae60;"></div>
                        </div>
                        <div class="worker-item">
                            <div class="worker-avatar">ì´</div>
                            <div class="worker-info">
                                <div class="worker-name">ì´ì² í˜¸</div>
                                <div class="worker-role">í¬ë ˆì¸ ê¸°ì‚¬</div>
                            </div>
                            <div class="worker-status status-green" style="background: #27ae60;"></div>
                        </div>
                        <div class="worker-item">
                            <div class="worker-avatar">ë°•</div>
                            <div class="worker-info">
                                <div class="worker-name">ë°•ë¯¼ìˆ˜</div>
                                <div class="worker-role">ì² ê·¼ê³µ</div>
                            </div>
                            <div class="worker-status status-orange" style="background: #f39c12;"></div>
                        </div>
                        <div class="worker-item">
                            <div class="worker-avatar">ì •</div>
                            <div class="worker-info">
                                <div class="worker-name">ì •ìš°ì§„</div>
                                <div class="worker-role">ëª©ìˆ˜</div>
                            </div>
                            <div class="worker-status status-green" style="background: #27ae60;"></div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- ëª¨ë‹ˆí„°ë§ -->
                <div id="monitoring" class="tab-content">
                <div class="section">
                    <div class="section-title">ğŸ“¹ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§</div>
                    <div class="tab-container">
                        <div class="tab-header">
                            <button class="tab-button active" onclick="switchMonitorTab('camera')">ì¹´ë©”ë¼</button>
                            <button class="tab-button" onclick="switchMonitorTab('sensor')">ì„¼ì„œ</button>
                        </div>
                        <div id="camera-tab" class="tab-content active">
                            <div style="background: #f8f9fa; height: 200px; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 15px;">
                                <div style="text-align: center; color: #666;">
                                    <i class="fas fa-video" style="font-size: 3em; margin-bottom: 10px;"></i>
                                    <div>ì‹¤ì‹œê°„ í˜„ì¥ ì˜ìƒ</div>
                                    <div style="font-size: 0.8em;">Aë™ 3ì¸µ - ì¹´ë©”ë¼ #1</div>
                                </div>
                            </div>
                            <div class="alert-item alert-info">
                                <div class="alert-title">AI ë¶„ì„ ê²°ê³¼</div>
                                <div class="alert-description">
                                    í˜„ì¬ í™”ë©´ì—ì„œ ê°ì§€ëœ ìœ„í—˜ ìš”ì†Œ: ì—†ìŒ<br>
                                    PPE ì°©ìš©ë¥ : 95% (19/20ëª…)
                                </div>
                            </div>
                        </div>
                        <div id="sensor-tab" class="tab-content">
                            <div class="card" style="margin-bottom: 10px;">
                                <div class="card-title">í™˜ê²½ ì„¼ì„œ</div>
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px; margin-top: 10px;">
                                    <div>ì˜¨ë„: <strong>22Â°C</strong></div>
                                    <div>ìŠµë„: <strong>65%</strong></div>
                                    <div>ì†ŒìŒ: <strong>72dB</strong></div>
                                    <div>ë¨¼ì§€: <strong>35ã/ã¥</strong></div>
                                </div>
                            </div>
                            <div class="card">
                                <div class="card-title">ì¥ë¹„ ìƒíƒœ</div>
                                <div style="margin-top: 10px;">
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>í¬ë ˆì¸ #1</span>
                                        <span class="status-green">ì •ìƒ</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                                        <span>í˜¸ì´ìŠ¤íŠ¸ #2</span>
                                        <span class="status-orange">ì ê²€ í•„ìš”</span>
                                    </div>
                                    <div style="display: flex; justify-content: space-between;">
                                        <span>ì½˜í¬ë¦¬íŠ¸ íŒí”„</span>
                                        <span class="status-green">ì •ìƒ</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

                <!-- ë³´ê³ ì„œ -->
                <div id="reports" class="tab-content">
                <div class="section">
                    <div class="section-title">ğŸ“Š ì•ˆì „ ë³´ê³ ì„œ</div>
                    <div class="card" style="margin-bottom: 15px;">
                        <div class="card-title">ê¸ˆì¼ í˜„í™© (12/20)</div>
                        <div style="text-align: left; margin-top: 10px;">
                            <div style="margin-bottom: 8px;">
                                <span>ì•ˆì „ ì ê²€ ì™„ë£Œìœ¨</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 90%;"></div>
                                </div>
                                <small>90% (18/20)</small>
                            </div>
                            <div style="margin-bottom: 8px;">
                                <span>ì•ˆì „ êµìœ¡ ì´ìˆ˜ìœ¨</span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 85%;"></div>
                                </div>
                                <small>85% (17/20)</small>
                            </div>
                            <div>
                                <span>PPE ì°©ìš©ë¥ </span>
                                <div class="progress-bar">
                                    <div class="progress-fill" style="width: 95%;"></div>
                                </div>
                                <small>95% (19/20)</small>
                            </div>
                        </div>
                    </div>
                    <div class="quick-actions">
                        <button class="action-btn">
                            <i class="fas fa-download"></i> ì¼ì¼ ë³´ê³ ì„œ
                        </button>
                        <button class="action-btn secondary">
                            <i class="fas fa-chart-line"></i> ì£¼ê°„ ë¶„ì„
                        </button>
                    </div>
                </div>
            </div>

                <!-- ì„¤ì • -->
                <div id="settings" class="tab-content">
                <div class="section">
                    <div class="section-title">âš™ï¸ ì„¤ì •</div>
                    <div class="worker-list">
                        <div class="worker-item" onclick="toggleSetting('notifications')">
                            <div style="display: flex; align-items: center; flex: 1;">
                                <i class="fas fa-bell" style="margin-right: 12px; color: #3498db;"></i>
                                <span>ì•Œë¦¼ ì„¤ì •</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: #ccc;"></i>
                        </div>
                        <div class="worker-item" onclick="toggleSetting('camera')">
                            <div style="display: flex; align-items: center; flex: 1;">
                                <i class="fas fa-video" style="margin-right: 12px; color: #e74c3c;"></i>
                                <span>ì¹´ë©”ë¼ ì„¤ì •</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: #ccc;"></i>
                        </div>
                        <div class="worker-item" onclick="toggleSetting('account')">
                            <div style="display: flex; align-items: center; flex: 1;">
                                <i class="fas fa-user" style="margin-right: 12px; color: #27ae60;"></i>
                                <span>ê³„ì • ê´€ë¦¬</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: #ccc;"></i>
                        </div>
                        <div class="worker-item" onclick="toggleSetting('sync')">
                            <div style="display: flex; align-items: center; flex: 1;">
                                <i class="fas fa-sync" style="margin-right: 12px; color: #f39c12;"></i>
                                <span>ë°ì´í„° ë™ê¸°í™”</span>
                            </div>
                            <i class="fas fa-chevron-right" style="color: #ccc;"></i>
                        </div>
                    </div>
                </div>
            </div>
        </div>

            <!-- í•˜ë‹¨ ë„¤ë¹„ê²Œì´ì…˜ (ê´€ë¦¬ì) -->
            <div class="bottom-nav">
                <div class="nav-item active" onclick="showTab('dashboard')">
                    <i class="fas fa-home"></i>
                    <span>í™ˆ</span>
                </div>
                <div class="nav-item" onclick="showTab('checklist')">
                    <i class="fas fa-clipboard-check"></i>
                    <span>ì²´í¬ë¦¬ìŠ¤íŠ¸</span>
                </div>
                <div class="nav-item" onclick="showTab('bim')">
                    <i class="fas fa-cube"></i>
                    <span>BIM</span>
                </div>
                <div class="nav-item" onclick="showTab('tracking')">
                    <i class="fas fa-map-marker-alt"></i>
                    <span>ìœ„ì¹˜ì¶”ì </span>
                </div>
                <div class="nav-item" onclick="showTab('monitoring')">
                    <i class="fas fa-video"></i>
                    <span>ëª¨ë‹ˆí„°ë§</span>
                </div>
            </div>
        </div>

        <!-- ì‘ì—…ì ì•± -->
        <div id="worker-app" class="hidden">
            <!-- í—¤ë” -->
            <div class="header">
                <div class="logo">
                    <div class="logo-icon"></div>
                    <span>Safe Con-BIM</span>
                </div>
                <div class="tagline">ì‘ì—…ì ëª¨ë“œ</div>
            </div>

            <!-- ìƒíƒœ í‘œì‹œë°” -->
            <div class="status-bar">
                <div class="status-item">
                    <div class="status-indicator status-green" style="background: #2ea043;"></div>
                    <i class="fas fa-wifi status-green"></i>
                    <span>ì—°ê²°ë¨</span>
                </div>
                <div class="status-item">
                    <div class="status-indicator status-green" style="background: #2ea043;"></div>
                    <i class="fas fa-check-circle status-green"></i>
                    <span>ì¶œê·¼</span>
                </div>
                <div class="status-item">
                    <i class="fas fa-clock status-blue"></i>
                    <span id="worker-time">14:32</span>
                </div>
            </div>

            <!-- ì‘ì—…ì ë©”ì¸ ì½˜í…ì¸  -->
            <div class="main-content worker-mode">
                <div class="card" style="margin-bottom: 30px;">
                    <div class="card-icon">ğŸ‘·</div>
                    <div class="card-title">ê¹€í˜„ìˆ˜ ì‘ì—…ì</div>
                    <div style="color: #8b949e; margin-top: 10px;">
                        <div>ì†Œì†: Aë™ 3ì¸µ ì² ê·¼íŒ€</div>
                        <div>ì¶œê·¼ì‹œê°„: 08:00</div>
                        <div>í˜„ì¬ìœ„ì¹˜: Aë™ 3ì¸µ</div>
                    </div>
                </div>

                <button class="worker-qr-btn pulse" onclick="workerQRScan()">
                    <i class="fas fa-qrcode" style="margin-right: 10px;"></i>
                    QR ì¶œì… ì¸ì¦
                </button>

                <div class="alert-item alert-info" style="margin-top: 20px;">
                    <div class="alert-title">ì˜¤ëŠ˜ì˜ ì•ˆì „ ì•Œë¦¼</div>
                    <div class="alert-description">
                        ğŸ›¡ï¸ ì•ˆì „ëª¨ì™€ ì•ˆì „ë²¨íŠ¸ ì°©ìš© í•„ìˆ˜<br>
                        âš ï¸ í¬ë ˆì¸ ì‘ì—…êµ¬ì—­ ì¶œì… ê¸ˆì§€<br>
                        ğŸ“š ì•ˆì „êµìœ¡ ë¯¸ì´ìˆ˜ - ì™„ë£Œ í•„ìš”
                    </div>
                </div>

                <div class="quick-actions" style="margin-top: 20px;">
                    <button class="action-btn" onclick="showSafetyEducation()">
                        <i class="fas fa-graduation-cap"></i> ì•ˆì „êµìœ¡
                    </button>
                    <button class="action-btn secondary" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i> ë¡œê·¸ì•„ì›ƒ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentUserMode = null;
        let currentUser = null; // ì†Œì…œ ë¡œê·¸ì¸ ì‚¬ìš©ì ì •ë³´

        // ì†Œì…œ ë¡œê·¸ì¸ ì„¤ì • (í•„ìš”ì‹œ ì‹¤ì œ í‚¤ë¡œ êµì²´)
        const SOCIAL_AUTH_CONFIG = {
            demoMode: true, // ì‹¤ì œ í‚¤ ì„¤ì • ì „ê¹Œì§€ ë°ëª¨ ë¡œê·¸ì¸ ì‚¬ìš©
            googleClientId: '', // ì˜ˆ: 'xxxxxxxxxxxx-xxxxxxxxxxxxxxxxxxxxxxxx.apps.googleusercontent.com'
            kakaoJavaScriptKey: '', // ì˜ˆ: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxx'
            naverClientId: '', // ì˜ˆ: 'xxxxxxxxxxxxxxxx'
            naverCallbackUrl: location.origin + location.pathname.replace(/[^/]+$/, '') + 'naver-callback.html',
            appleClientId: '', // ì˜ˆ: 'com.example.web'
            appleRedirectURI: location.origin + location.pathname
        };

        function initializeSocialAuth() {
            try {
                // Google
                if (!SOCIAL_AUTH_CONFIG.demoMode && SOCIAL_AUTH_CONFIG.googleClientId && window.google && google.accounts?.id) {
                    google.accounts.id.initialize({
                        client_id: SOCIAL_AUTH_CONFIG.googleClientId,
                        callback: (response) => {
                            // ID í† í° íŒŒì‹±ì€ ë°±ì—”ë“œ ê²€ì¦ ê¶Œì¥. ì—¬ê¸°ì„  ë°ëª¨ë¡œ í”„ë¡œí•„ ìµœì†Œí™” ì €ì¥
                            afterLogin({
                                provider: 'google',
                                name: 'Google ì‚¬ìš©ì',
                                email: '',
                                picture: ''
                            });
                        }
                    });
                }

                // Kakao
                if (!SOCIAL_AUTH_CONFIG.demoMode && SOCIAL_AUTH_CONFIG.kakaoJavaScriptKey && window.Kakao && !Kakao.isInitialized()) {
                    Kakao.init(SOCIAL_AUTH_CONFIG.kakaoJavaScriptKey);
                }
            } catch(e) {
                console.warn('ì†Œì…œ ë¡œê·¸ì¸ ì´ˆê¸°í™” ê²½ê³ :', e);
            }
        }

        function handleSocialLogin(provider) {
            if (SOCIAL_AUTH_CONFIG.demoMode) {
                // ë°ëª¨ ëª¨ë“œ: ì¦‰ì‹œ ë¡œê·¸ì¸ ì²˜ë¦¬
                const demoProfiles = {
                    apple:  { provider: 'apple',  name: 'Apple ì‚¬ìš©ì',  email: 'apple@example.com' },
                    google: { provider: 'google', name: 'Google ì‚¬ìš©ì', email: 'google@example.com' },
                    kakao:  { provider: 'kakao',  name: 'ì¹´ì¹´ì˜¤ ì‚¬ìš©ì',  email: 'kakao@example.com' },
                    naver:  { provider: 'naver',  name: 'ë„¤ì´ë²„ ì‚¬ìš©ì',  email: 'naver@example.com' }
                };
                afterLogin(demoProfiles[provider] || { provider, name: 'ì‚¬ìš©ì', email: '' });
                return;
            }

            switch(provider) {
                case 'google':
                    if (window.google && google.accounts?.id) {
                        google.accounts.id.prompt();
                    } else {
                        alert('Google ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. CLIENT_IDë¥¼ ì„¤ì •í•˜ì„¸ìš”.');
                    }
                    break;
                case 'kakao':
                    if (window.Kakao && Kakao.isInitialized()) {
                        Kakao.Auth.login({
                            success: function() {
                                Kakao.API.request({ url: '/v2/user/me', success: function(res){
                                    afterLogin({ provider: 'kakao', name: res.kakao_account?.profile?.nickname || 'ì¹´ì¹´ì˜¤ ì‚¬ìš©ì' });
                                }});
                            },
                            fail: function(err){ alert('ì¹´ì¹´ì˜¤ ë¡œê·¸ì¸ ì‹¤íŒ¨: ' + JSON.stringify(err)); }
                        });
                    } else {
                        alert('Kakao ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. JavaScript Keyë¥¼ ì„¤ì •í•˜ì„¸ìš”.');
                    }
                    break;
                case 'naver':
                    if (SOCIAL_AUTH_CONFIG.naverClientId) {
                        const state = Math.random().toString(36).slice(2);
                        const url = `https://nid.naver.com/oauth2.0/authorize?response_type=code&client_id=${SOCIAL_AUTH_CONFIG.naverClientId}&redirect_uri=${encodeURIComponent(SOCIAL_AUTH_CONFIG.naverCallbackUrl)}&state=${state}`;
                        window.open(url, 'naverLogin', 'width=480,height=640');
                        window.addEventListener('message', (e) => {
                            if (e.data && e.data.type === 'NAVER_LOGIN_SUCCESS') {
                                afterLogin({ provider: 'naver', name: e.data.name || 'ë„¤ì´ë²„ ì‚¬ìš©ì' });
                            }
                        }, { once: true });
                    } else {
                        alert('Naver ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. Client IDì™€ Callback URLì„ ì„¤ì •í•˜ì„¸ìš”.');
                    }
                    break;
                case 'apple':
                    alert('Apple ë¡œê·¸ì¸ì€ ì„¤ì •ì´ í•„ìš”í•©ë‹ˆë‹¤. (Apple Developer ì„¤ì •)');
                    break;
            }
        }

        function afterLogin(user) {
            currentUser = user;
            localStorage.setItem('safecon_user', JSON.stringify(user));
            updateLoginUI();
            // ë¡œê·¸ì¸ í›„ ì—­í•  ì„ íƒ ìœ ë„ (ê¸°ì¡´ ë²„íŠ¼ ì‚¬ìš©)
            alert(`${user.name || 'ì‚¬ìš©ì'}ë‹˜, ì†Œì…œ ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. ì—­í• ì„ ì„ íƒí•˜ì„¸ìš”.`);
        }

        function updateLoginUI() {
            const subtitle = document.querySelector('.login-subtitle');
            if (currentUser && subtitle) {
                subtitle.textContent = `${currentUser.name || 'ì‚¬ìš©ì'}ë‹˜ ë¡œê·¸ì¸ë¨ (${currentUser.provider})`;
            }
        }

        // ë¡œê·¸ì¸ í•¨ìˆ˜
        function loginAs(mode) {
            currentUserMode = mode;
            document.getElementById('login-screen').classList.add('hidden');
            
            if (mode === 'manager') {
                document.getElementById('manager-app').classList.remove('hidden');
            } else {
                document.getElementById('worker-app').classList.remove('hidden');
            }
        }

        // ë¡œê·¸ì•„ì›ƒ í•¨ìˆ˜
        function logout() {
            currentUserMode = null;
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('manager-app').classList.add('hidden');
            document.getElementById('worker-app').classList.add('hidden');
        }

        // íƒ­ ì „í™˜ í•¨ìˆ˜
        function showTab(tabName) {
            // ëª¨ë“  íƒ­ ì½˜í…ì¸  ìˆ¨ê¸°ê¸°
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            // ëª¨ë“  ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œ ë¹„í™œì„±í™”
            const navItems = document.querySelectorAll('.nav-item');
            navItems.forEach(item => {
                item.classList.remove('active');
            });

            // ì„ íƒëœ íƒ­ í‘œì‹œ
            document.getElementById(tabName).classList.add('active');
            
            // í•´ë‹¹ ë„¤ë¹„ê²Œì´ì…˜ ì•„ì´í…œ í™œì„±í™”
            const targetNavIndex = ['dashboard', 'checklist', 'bim', 'tracking', 'monitoring'].indexOf(tabName);
            if (targetNavIndex >= 0) {
                navItems[targetNavIndex].classList.add('active');
            }
        }

        // ìŒì„±ì¸ì‹ í•¨ìˆ˜
        function startVoiceRecognition() {
            if ('speechRecognition' in window || 'webkitSpeechRecognition' in window) {
                const recognition = new (window.SpeechRecognition || window.webkitSpeechRecognition)();
                recognition.lang = 'ko-KR';
                recognition.onresult = function(event) {
                    const command = event.results[0][0].transcript;
                    alert(`ìŒì„± ëª…ë ¹ ì¸ì‹: "${command}"`);
                    // ì—¬ê¸°ì— ìŒì„± ëª…ë ¹ ì²˜ë¦¬ ë¡œì§ ì¶”ê°€
                };
                recognition.start();
            } else {
                alert('ìŒì„±ì¸ì‹ì´ ì§€ì›ë˜ì§€ ì•ŠëŠ” ë¸Œë¼ìš°ì €ì…ë‹ˆë‹¤.');
            }
        }

        // QR ìŠ¤ìºë„ˆ í•¨ìˆ˜
        function startQRScanner() {
            document.getElementById('qr-scanner').classList.remove('hidden');
            showTab('tracking');
            
            // ì‹¤ì œ ì¹´ë©”ë¼ API ì‚¬ìš©ì‹œ
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        // ì¹´ë©”ë¼ ìŠ¤íŠ¸ë¦¼ ì²˜ë¦¬
                        console.log('ì¹´ë©”ë¼ í™œì„±í™”ë¨');
                    })
                    .catch(function(error) {
                        console.error('ì¹´ë©”ë¼ ì ‘ê·¼ ì‹¤íŒ¨:', error);
                        alert('ì¹´ë©”ë¼ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    });
            }
        }

        function stopQRScanner() {
            document.getElementById('qr-scanner').classList.add('hidden');
        }

        // NFC í™œì„±í™” í•¨ìˆ˜
        function activateNFC() {
            if ('NDEFReader' in window) {
                const ndef = new NDEFReader();
                ndef.scan().then(() => {
                    alert('NFC ìŠ¤ìº”ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤.');
                }).catch(error => {
                    alert('NFCê°€ ì§€ì›ë˜ì§€ ì•Šê±°ë‚˜ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                });
            } else {
                alert('ì´ ë””ë°”ì´ìŠ¤ì—ì„œëŠ” NFCê°€ ì§€ì›ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
            }
        }

        // ì‘ì—…ì QR ìŠ¤ìº”
        function workerQRScan() {
            alert('QR ì½”ë“œ ì¶œì… ì¸ì¦ì„ ì‹œì‘í•©ë‹ˆë‹¤.');
            if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
                navigator.mediaDevices.getUserMedia({ video: true })
                    .then(function(stream) {
                        alert('ì¶œì… ì¸ì¦ì´ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                    })
                    .catch(function(error) {
                        alert('ì¹´ë©”ë¼ ì ‘ê·¼ ê¶Œí•œì´ í•„ìš”í•©ë‹ˆë‹¤.');
                    });
            }
        }

        // ì•ˆì „êµìœ¡ í•¨ìˆ˜ (ì‘ì—…ììš©)
        function showSafetyEducation() {
            alert('ì•ˆì „êµìœ¡ í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.');
        }

        // ê¸°ëŠ¥ ì ‘ê·¼ í™•ì¸ (ê´€ë¦¬ììš©)
        let pendingFeature = null; // ì—…ê·¸ë ˆì´ë“œ í›„ ì‹¤í–‰í•  ê¸°ëŠ¥ ì €ì¥

        function checkFeatureAccess(feature) {
            const accountType = document.getElementById('manager-account-type');
            const isBasic = accountType.classList.contains('basic');
            
            if (isBasic && (feature === 'bim' || feature === 'ai-prediction' || feature === 'advanced-monitoring')) {
                // Pro ì „ìš© ê¸°ëŠ¥ ì ‘ê·¼ ì‹œ ë¹„êµí‘œ í‘œì‹œ
                pendingFeature = feature; // ì—…ê·¸ë ˆì´ë“œ í›„ ì‹¤í–‰í•  ê¸°ëŠ¥ ì €ì¥
                showPlanComparison();
                
                // ì•Œë¦¼ê³¼ í•¨ê»˜ ì—…ê·¸ë ˆì´ë“œ ìœ ë„
                setTimeout(() => {
                    alert(`ğŸ”’ ${getFeatureName(feature)} ê¸°ëŠ¥ì€ Safe Pro ê³„ì • ì „ìš©ì…ë‹ˆë‹¤.\n\nì•„ë˜ ë¹„êµí‘œë¥¼ í™•ì¸í•˜ê³  ì—…ê·¸ë ˆì´ë“œí•´ë³´ì„¸ìš”!`);
                }, 500);
                return false;
            }
            
            // ê¸°ëŠ¥ë³„ ë¶„ê¸° (Pro ê³„ì •ì´ê±°ë‚˜ ë¬´ë£Œ ê¸°ëŠ¥)
            switch(feature) {
                case 'bim':
                    if (!isBasic) {
                        showTab('bim');
                        showFeatureNotification('BIM 4D ì‹œë®¬ë ˆì´ì…˜');
                    }
                    break;
                case 'tracking':
                    showTab('tracking');
                    break;
                case 'monitoring':
                    if (!isBasic) {
                        showTab('monitoring');
                        showFeatureNotification('ê³ ê¸‰ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§');
                    } else {
                        showTab('monitoring'); // ê¸°ë³¸ ëª¨ë‹ˆí„°ë§ì€ ì ‘ê·¼ ê°€ëŠ¥
                    }
                    break;
                default:
                    showTab(feature);
            }
        }

        // ë¹„êµí‘œ í‘œì‹œ
        function showPlanComparison() {
            document.getElementById('plan-comparison').classList.remove('hidden');
            // ë¶€ë“œëŸ¬ìš´ ìŠ¤í¬ë¡¤ë¡œ ë¹„êµí‘œë¡œ ì´ë™
            setTimeout(() => {
                document.getElementById('plan-comparison').scrollIntoView({ 
                    behavior: 'smooth', 
                    block: 'center' 
                });
            }, 100);
        }

        // ë¹„êµí‘œ ìˆ¨ê¸°ê¸°
        function hidePlanComparison() {
            document.getElementById('plan-comparison').classList.add('hidden');
            pendingFeature = null; // ëŒ€ê¸° ì¤‘ì¸ ê¸°ëŠ¥ ì´ˆê¸°í™”
        }

        // ê¸°ëŠ¥ í™œì„±í™” ì•Œë¦¼
        function showFeatureNotification(featureName) {
            // ê¸°ì¡´ ì•Œë¦¼ ì œê±°
            const existingNotification = document.querySelector('.upgrade-notification');
            if (existingNotification) {
                existingNotification.remove();
            }

            // ìƒˆ ì•Œë¦¼ ìƒì„±
            const notification = document.createElement('div');
            notification.className = 'upgrade-notification';
            notification.innerHTML = `
                <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                    <i class="fas fa-check-circle"></i>
                    <span>${featureName} ê¸°ëŠ¥ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!</span>
                </div>
            `;

            // ëŒ€ì‹œë³´ë“œ ìƒë‹¨ì— ì‚½ì…
            const dashboard = document.getElementById('dashboard');
            dashboard.insertBefore(notification, dashboard.firstChild);

            // 3ì´ˆ í›„ ìë™ ì œê±°
            setTimeout(() => {
                if (notification.parentNode) {
                    notification.remove();
                }
            }, 3000);
        }

        function getFeatureName(feature) {
            const names = {
                'bim': 'BIM 4D ì‹œë®¬ë ˆì´ì…˜',
                'ai-prediction': 'AI ìœ„í—˜ ì˜ˆì¸¡',
                'advanced-monitoring': 'ê³ ê¸‰ ëª¨ë‹ˆí„°ë§'
            };
            return names[feature] || feature;
        }

        // ê´€ë¦¬ì ì—…ê·¸ë ˆì´ë“œ ëª¨ë‹¬ í•¨ìˆ˜
        function showManagerUpgradeModal() {
            const isConfirmed = confirm(`ğŸ—ï¸ Safe Pro ì—…ê·¸ë ˆì´ë“œ\n\nì›” 37ë§Œì›ìœ¼ë¡œ ë‹¤ìŒ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì„¸ìš”:\n\nâœ… BIM 4D ì‹œë®¬ë ˆì´ì…˜\nâœ… AI ìœ„í—˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œ\nâœ… ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§\nâœ… í´ë¼ìš°ë“œ ë°±ì—… & ë³´ì•ˆ\nâœ… 24/7 ê¸°ìˆ ì§€ì›\nâœ… ê³ ê¸‰ ì•ˆì „êµìœ¡\nâœ… ë°ì´í„° ë¶„ì„ ë¦¬í¬íŠ¸\n\nì—…ê·¸ë ˆì´ë“œ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`);
            
            if (isConfirmed) {
                // Pro ê³„ì •ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
                const accountBadge = document.getElementById('manager-account-type');
                accountBadge.innerHTML = '<i class="fas fa-crown"></i> Safe Pro ê³„ì •';
                accountBadge.classList.remove('basic');
                accountBadge.classList.add('pro');
                
                // ì—…ê·¸ë ˆì´ë“œ ë²„íŠ¼ ìˆ¨ê¸°ê¸°
                document.getElementById('manager-upgrade-btn').style.display = 'none';
                
                // ê¸°ëŠ¥ ìƒíƒœ ì—…ë°ì´íŠ¸
                const lockedFeatures = document.querySelectorAll('.feature-locked');
                lockedFeatures.forEach(feature => {
                    feature.textContent = 'í¬í•¨';
                    feature.classList.remove('feature-locked');
                    feature.classList.add('feature-included');
                });
                
                const limitedFeature = document.querySelector('.feature-limited');
                if (limitedFeature) {
                    limitedFeature.textContent = 'í¬í•¨';
                    limitedFeature.classList.remove('feature-limited');
                    limitedFeature.classList.add('feature-included');
                }

                // ë¹ ë¥¸ ì•¡ì…˜ ë²„íŠ¼ì˜ Pro ë°°ì§€ ì œê±°
                const badges = document.querySelectorAll('#bim-badge, #monitoring-badge');
                badges.forEach(badge => {
                    if (badge) badge.style.display = 'none';
                });
                
                // ë¹„êµí‘œ ìˆ¨ê¸°ê¸°
                hidePlanComparison();
                
                // ì—…ê·¸ë ˆì´ë“œ ì™„ë£Œ ì•Œë¦¼
                alert('ğŸ‰ Safe Pro ê³„ì •ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ ì™„ë£Œ!\nì´ì œ ëª¨ë“  ê³ ê¸‰ ê¸°ëŠ¥ì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
                
                // ëŒ€ê¸° ì¤‘ì¸ ê¸°ëŠ¥ì´ ìˆë‹¤ë©´ ìë™ ì‹¤í–‰
                if (pendingFeature) {
                    setTimeout(() => {
                        switch(pendingFeature) {
                            case 'bim':
                                showTab('bim');
                                showFeatureNotification('BIM 4D ì‹œë®¬ë ˆì´ì…˜ì´ ì´ì œ ì´ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤!');
                                break;
                            case 'ai-prediction':
                                showTab('monitoring');
                                showFeatureNotification('AI ìœ„í—˜ ì˜ˆì¸¡ ì‹œìŠ¤í…œì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
                                break;
                            case 'advanced-monitoring':
                                showTab('monitoring');
                                showFeatureNotification('ê³ ê¸‰ ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ì´ í™œì„±í™”ë˜ì—ˆìŠµë‹ˆë‹¤!');
                                break;
                        }
                        pendingFeature = null; // ê¸°ëŠ¥ ì‹¤í–‰ í›„ ì´ˆê¸°í™”
                    }, 1000);
                }
            }
        }

        // ê³„ì • íƒ€ì… í† ê¸€ (ë°ëª¨ìš©)
        function toggleManagerAccountType() {
            const accountBadge = document.getElementById('manager-account-type');
            if (accountBadge.classList.contains('basic')) {
                // Proë¡œ ë³€ê²½
                accountBadge.innerHTML = '<i class="fas fa-crown"></i> Safe Pro ê³„ì •';
                accountBadge.classList.remove('basic');
                accountBadge.classList.add('pro');
                document.getElementById('manager-upgrade-btn').style.display = 'none';
            } else {
                // Basicìœ¼ë¡œ ë³€ê²½
                accountBadge.innerHTML = '<i class="fas fa-user"></i> Basic ê³„ì •';
                accountBadge.classList.remove('pro');
                accountBadge.classList.add('basic');
                document.getElementById('manager-upgrade-btn').style.display = 'block';
            }
        }

        // ë””ì§€í„¸ ì²´í¬ë¦¬ìŠ¤íŠ¸ ê¸°ëŠ¥ë“¤
        let checklistData = {
            totalItems: 15,
            completedItems: 0,
            criticalItems: ['ppe1', 'eq1', 'eq3', 'eq4', 'edu1'],
            sections: {
                'ppe': { total: 4, completed: 0 },
                'equipment': { total: 5, completed: 0 },
                'environment': { total: 3, completed: 0 },
                'education': { total: 3, completed: 0 }
            }
        };

        // ì„¹ì…˜ í† ê¸€
        function toggleSection(sectionId) {
            const section = document.getElementById(sectionId);
            section.classList.toggle('expanded');
        }

        // ì²´í¬ í•­ëª© í† ê¸€
        function toggleCheckItem(itemElement, itemId) {
            const checkbox = document.getElementById(itemId);
            const checkIcon = checkbox.querySelector('i');
            const isCompleted = checkbox.classList.contains('checked');

            // í–…í‹± í”¼ë“œë°± ì¶”ê°€
            triggerHapticFeedback('light');

            if (isCompleted) {
                // ì²´í¬ í•´ì œ
                checkbox.classList.remove('checked');
                checkIcon.style.display = 'none';
                itemElement.classList.remove('completed');
                checklistData.completedItems--;
            } else {
                // ì²´í¬ ì™„ë£Œ
                checkbox.classList.add('checked');
                checkIcon.style.display = 'block';
                itemElement.classList.add('completed');
                checklistData.completedItems++;
                
                // ì™„ë£Œ ì‹œ ì¤‘ê°„ ê°•ë„ í–…í‹± í”¼ë“œë°±
                triggerHapticFeedback('medium');
            }

            // ì„¹ì…˜ë³„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateSectionProgress(itemId);
            
            // ì „ì²´ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
            updateOverallProgress();

            // ì œì¶œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            updateSubmitButton();
        }

        // ì„¹ì…˜ë³„ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateSectionProgress(itemId) {
            let sectionKey = '';
            if (itemId.startsWith('ppe')) sectionKey = 'ppe';
            else if (itemId.startsWith('eq')) sectionKey = 'equipment';
            else if (itemId.startsWith('env')) sectionKey = 'environment';
            else if (itemId.startsWith('edu')) sectionKey = 'education';

            if (sectionKey) {
                const sectionItems = document.querySelectorAll(`[id^="${itemId.substring(0, 3)}"]`);
                const completedInSection = Array.from(sectionItems).filter(item => 
                    item.classList.contains('checked')).length;
                
                checklistData.sections[sectionKey].completed = completedInSection;
                
                const progressElement = document.getElementById(`${sectionKey}-progress`);
                if (progressElement) {
                    progressElement.textContent = `${completedInSection}/${checklistData.sections[sectionKey].total}`;
                }
            }
        }

        // ì „ì²´ ì§„í–‰ë¥  ì—…ë°ì´íŠ¸
        function updateOverallProgress() {
            document.getElementById('completed-count').textContent = checklistData.completedItems;
            document.getElementById('pending-count').textContent = checklistData.totalItems - checklistData.completedItems;
            
            const progressPercent = Math.round((checklistData.completedItems / checklistData.totalItems) * 100);
            document.getElementById('progress-percent').textContent = `${progressPercent}%`;
        }

        // ì œì¶œ ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
        function updateSubmitButton() {
            const submitBtn = document.getElementById('submit-btn');
            const criticalCompleted = checklistData.criticalItems.every(id => 
                document.getElementById(id).classList.contains('checked'));

            if (criticalCompleted) {
                submitBtn.disabled = false;
                submitBtn.innerHTML = '<i class="fas fa-paper-plane" style="margin-right: 8px;"></i>ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œí•˜ê¸°';
                submitBtn.style.background = 'linear-gradient(135deg, #2ea043, #238636)';
            } else {
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-exclamation-triangle" style="margin-right: 8px;"></i>ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œ (í•„ìˆ˜ í•­ëª© ë¯¸ì™„ë£Œ)';
                submitBtn.style.background = '#6e7681';
            }
        }

        // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œ
        function submitChecklist() {
            const completionRate = Math.round((checklistData.completedItems / checklistData.totalItems) * 100);
            
            alert(`âœ… ì•ˆì „ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œ ì™„ë£Œ!\n\nì™„ë£Œìœ¨: ${completionRate}%\nì™„ë£Œ í•­ëª©: ${checklistData.completedItems}/${checklistData.totalItems}\n\nì œì¶œ ì‹œê°„: ${new Date().toLocaleString('ko-KR')}`);
            
            // ì„±ê³µ ì•Œë¦¼ í‘œì‹œ
            showFeatureNotification(`ì•ˆì „ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì œì¶œ ì™„ë£Œ (${completionRate}%)`);
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì²´í¬ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
        function initializeChecklist() {
            // ì²« ë²ˆì§¸ ì„¹ì…˜ ìë™ í™•ì¥
            document.getElementById('ppe-section').classList.add('expanded');
            
            // ì§„í–‰ë¥  ì´ˆê¸°í™”
            updateOverallProgress();
            updateSubmitButton();
        }

        // ëª¨ë‹ˆí„°ë§ íƒ­ ì „í™˜
        function switchMonitorTab(tabType) {
            const tabButtons = document.querySelectorAll('.tab-button');
            tabButtons.forEach(btn => btn.classList.remove('active'));
            
            const tabContents = document.querySelectorAll('#monitoring .tab-content');
            tabContents.forEach(content => content.classList.remove('active'));

            if (tabType === 'camera') {
                tabButtons[0].classList.add('active');
                document.getElementById('camera-tab').classList.add('active');
            } else {
                tabButtons[1].classList.add('active');
                document.getElementById('sensor-tab').classList.add('active');
            }
        }

        // ì„¤ì • í† ê¸€
        function toggleSetting(settingType) {
            alert(`${settingType} ì„¤ì • í˜ì´ì§€ë¥¼ êµ¬í˜„í•´ì•¼ í•©ë‹ˆë‹¤.`);
        }

        // ì‹¤ì‹œê°„ ë°ì´í„° ì—…ë°ì´íŠ¸ ì‹œë®¬ë ˆì´ì…˜
        function updateDashboard() {
            // ì•ˆì „ ì ìˆ˜ ëœë¤ ì—…ë°ì´íŠ¸ (85-95 ì‚¬ì´)
            const safetyScore = Math.floor(Math.random() * 11) + 85;
            const safetyElement = document.querySelector('.safety-score');
            if (safetyElement) {
                safetyElement.textContent = safetyScore;
                const progressBar = safetyElement.parentElement.querySelector('.progress-fill');
                if (progressBar) {
                    progressBar.style.width = safetyScore + '%';
                }
            }

            // ì‹œê°„ ì—…ë°ì´íŠ¸
            const timeElements = document.querySelectorAll('#current-time, #worker-time');
            timeElements.forEach(element => {
                const now = new Date();
                element.textContent = now.toLocaleTimeString('ko-KR', {
                    hour: '2-digit',
                    minute: '2-digit'
                });
            });
        }

        // 3ì´ˆë§ˆë‹¤ ëŒ€ì‹œë³´ë“œ ì—…ë°ì´íŠ¸
        setInterval(updateDashboard, 3000);

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Safe Con-BIM ëª¨ë°”ì¼ ì•±ì´ ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.');
            updateDashboard();
            
            // ë¡œê·¸ì¸ í™”ë©´ í‘œì‹œ
            document.getElementById('login-screen').classList.remove('hidden');
            document.getElementById('manager-app').classList.add('hidden');
            document.getElementById('worker-app').classList.add('hidden');
            
            // ì²´í¬ë¦¬ìŠ¤íŠ¸ ì´ˆê¸°í™”
            initializeChecklist();
            
            // ì†Œì…œ ë¡œê·¸ì¸ ì´ˆê¸°í™”
            initializeSocialAuth();
            
            // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì´ˆê¸° ì„¤ì •
            handleNetworkChange();
            
            // iOS PWA ì„¤ì¹˜ ê°€ì´ë“œ í‘œì‹œ (iOSì—ì„œë§Œ)
            if (isIOSDevice() && !isInStandaloneMode()) {
                showIOSInstallGuide();
            }
            
            // PWA ëª¨ë“œì—ì„œ ì‹¤í–‰ ì¤‘ì¼ ë•Œ ìƒíƒœ í‘œì‹œ
            if (isInStandaloneMode()) {
                console.log('PWA ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.');
                
                // PWA ì‹¤í–‰ ì•Œë¦¼ ì¶”ê°€
                setTimeout(() => {
                    const notification = document.createElement('div');
                    notification.className = 'upgrade-notification';
                    notification.style.background = 'linear-gradient(135deg, #2ea043, #238636)';
                    notification.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-mobile-alt"></i>
                            <span>PWA ì•± ëª¨ë“œë¡œ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤!</span>
                        </div>
                    `;
                    
                    document.body.appendChild(notification);
                    
                    // 3ì´ˆ í›„ ì œê±°
                    setTimeout(() => {
                        if (notification.parentNode) {
                            notification.remove();
                        }
                    }, 3000);
                }, 1000);
            }
        });

        // PWA ì„œë¹„ìŠ¤ ì›Œì»¤ ë“±ë¡ (iOS ì§€ì› í¬í•¨)
        if ('serviceWorker' in navigator) {
            navigator.serviceWorker.register('./sw.js', { scope: './' })
                .then(function(registration) {
                    console.log('Service Worker ë“±ë¡ ì„±ê³µ:', registration.scope);
                    
                    // ì„œë¹„ìŠ¤ ì›Œì»¤ ì—…ë°ì´íŠ¸ í™•ì¸
                    registration.addEventListener('updatefound', () => {
                        const newWorker = registration.installing;
                        newWorker.addEventListener('statechange', () => {
                            if (newWorker.state === 'installed' && navigator.serviceWorker.controller) {
                                // ìƒˆ ë²„ì „ ì‚¬ìš© ê°€ëŠ¥ ì•Œë¦¼
                                if (confirm('ìƒˆ ë²„ì „ì´ ì‚¬ìš© ê°€ëŠ¥í•©ë‹ˆë‹¤. ì—…ë°ì´íŠ¸í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                                    newWorker.postMessage({ type: 'SKIP_WAITING' });
                                    window.location.reload();
                                }
                            }
                        });
                    });
                })
                .catch(function(error) {
                    console.log('Service Worker ë“±ë¡ ì‹¤íŒ¨:', error);
                });
        }

        // iOS PWA ì„¤ì¹˜ ê°€ì´ë“œ í•¨ìˆ˜
        function showIOSInstallGuide() {
            if (isIOSDevice() && !isInStandaloneMode() && !localStorage.getItem('installGuideAck')) {
                const modal = document.getElementById('install-modal');
                modal.classList.remove('hidden');
            }
        }

        function hideInstallModal(){
            document.getElementById('install-modal').classList.add('hidden');
        }
        function ackInstallGuide(){
            localStorage.setItem('installGuideAck', '1');
            hideInstallModal();
        }

        // iOS ë””ë°”ì´ìŠ¤ í™•ì¸
        function isIOSDevice() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        // ìŠ¤íƒ ë“œì–¼ë¡  ëª¨ë“œ í™•ì¸ (PWAë¡œ ì‹¤í–‰ ì¤‘ì¸ì§€)
        function isInStandaloneMode() {
            return window.navigator.standalone === true || 
                   window.matchMedia('(display-mode: standalone)').matches;
        }

        // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ëª¨ë‹ˆí„°ë§
        function handleNetworkChange() {
            if (navigator.onLine) {
                document.querySelector('.status-bar .status-item i.fa-wifi')
                    .className = 'fas fa-wifi status-green';
                document.querySelector('.status-bar .status-item span').textContent = 'ì—°ê²°ë¨';
                
                // ì˜¤í”„ë¼ì¸ ë°ì´í„° ë™ê¸°í™”
                if ('serviceWorker' in navigator && 'sync' in window.ServiceWorkerRegistration.prototype) {
                    navigator.serviceWorker.ready.then(registration => {
                        return registration.sync.register('background-checklist-sync');
                    });
                }
            } else {
                document.querySelector('.status-bar .status-item i.fa-wifi')
                    .className = 'fas fa-wifi-slash status-red';
                document.querySelector('.status-bar .status-item span').textContent = 'ì˜¤í”„ë¼ì¸';
            }
        }

        // ë„¤íŠ¸ì›Œí¬ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ
        window.addEventListener('online', handleNetworkChange);
        window.addEventListener('offline', handleNetworkChange);

        // iOS ìƒíƒœë°” ìƒ‰ìƒ ë™ì  ë³€ê²½
        function updateStatusBarColor(isDark = true) {
            const statusBarMeta = document.querySelector('meta[name="apple-mobile-web-app-status-bar-style"]');
            if (statusBarMeta) {
                statusBarMeta.content = isDark ? 'black-translucent' : 'default';
            }
        }

        // í–…í‹± í”¼ë“œë°± (iOS ì§€ì›)
        function triggerHapticFeedback(type = 'light') {
            if (window.navigator && window.navigator.vibrate) {
                switch(type) {
                    case 'light':
                        window.navigator.vibrate(10);
                        break;
                    case 'medium':
                        window.navigator.vibrate(20);
                        break;
                    case 'heavy':
                        window.navigator.vibrate(30);
                        break;
                }
            }
        }
    </script>
</body>
</html> 